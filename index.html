<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>4th of July Trip Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: sans-serif;
      background: #f7f9fc;
      margin: 0;
      padding: 20px;
      color: #222;
    }

    h1 {
      text-align: center;
      color: #c0392b;
    }

    .clock {
      text-align: center;
      font-size: 1.2em;
      margin-bottom: 30px;
    }

    .timeline {
      max-width: 700px;
      margin: 0 auto;
      border-left: 3px solid #c0392b;
      padding-left: 20px;
    }

    .event {
      margin-bottom: 30px;
      position: relative;
      padding-left: 10px;
    }

    .event::before {
      content: "üö©";
      position: absolute;
      left: -33px;
      font-size: 1.2em;
      top: 0;
    }

    .event.active {
      background-color: #eaf2f8;
      border-left: 5px solid #3498db;
      padding-left: 15px;
    }

    .time {
      font-weight: bold;
      font-size: 1.1em;
    }

    .mode {
      font-size: 0.95em;
      margin-bottom: 6px;
    }

    .buffer {
      color: #777;
      font-size: 0.9em;
    }

    .countdown {
      color: #c0392b;
      font-weight: bold;
      font-size: 0.9em;
    }

    .ac { color: #27ae60; }
    .bart { color: #2980b9; }
    .cable { color: #d35400; }
    .muni { color: #8e44ad; }
    .ferry { color: #16a085; }
    .ggt { color: #e67e22; }
    .walk { color: #7f8c8d; }

    @media (max-width: 600px) {
      .timeline {
        padding-left: 10px;
      }
      .event::before {
        left: -25px;
      }
    }
  </style>
</head>
<body>
  <h1>üéÜ 4th of July Trip Tracker</h1>
  <div class="clock" id="clock">Current Time: --:--:--</div>

  <div class="timeline" id="timeline">
    <!-- Each event includes a data-start and data-end in 24hr format -->
    <div class="event walk" data-start="08:47" data-end="09:18">
      <div class="time">8:47 AM ‚Äì Walk to AC Transit stop</div>
    </div>

    <div class="event ac" data-start="09:18" data-end="09:29">
      <div class="time">9:18 AM ‚Äì 9:29 AM: AC Transit (7)</div>
      <div class="mode">College & Derby ‚Üí Shattuck & Center</div>
      <div class="buffer">14 min buffer</div>
    </div>

    <div class="event bart" data-start="09:43" data-end="10:05">
      <div class="time">9:43 AM ‚Äì 10:05 AM: BART (Red-S)</div>
      <div class="mode">Downtown Berkeley ‚Üí Embarcadero</div>
      <div class="buffer">40 min buffer</div>
    </div>

    <div class="event cable" data-start="10:45" data-end="10:54">
      <div class="time">10:45 AM ‚Äì 10:54 AM: Cable Car (CA)</div>
      <div class="mode">Drumm & California ‚Üí Mason & California</div>
      <div class="buffer">1h 9m buffer</div>
    </div>

    <div class="event muni" data-start="12:02" data-end="12:15">
      <div class="time">12:02 PM ‚Äì 12:15 PM: Muni (1)</div>
      <div class="mode">Pacific & Mason ‚Üí Broadway & Sansome</div>
      <div class="buffer">20 min buffer</div>
    </div>

    <div class="event ferry" data-start="12:35" data-end="13:05">
      <div class="time">12:35 PM ‚Äì 1:05 PM: Ferry to Sausalito</div>
      <div class="mode">Ferry Building Gate B ‚Üí Sausalito</div>
      <div class="buffer">1h 41m buffer</div>
    </div>

    <div class="event ggt" data-start="14:46" data-end="15:26">
      <div class="time">2:46 PM ‚Äì 3:26 PM: Golden Gate Transit (130)</div>
      <div class="mode">Bridgeway & El Portal ‚Üí Hyde & Grove</div>
      <div class="buffer">1h 25m buffer (Waymo?)</div>
    </div>

    <div class="event bart" data-start="16:51" data-end="17:20">
      <div class="time">4:51 PM ‚Äì 5:20 PM: BART to SFO</div>
      <div class="mode">Civic Center ‚Üí SFO</div>
      <div class="buffer">24 min buffer</div>
    </div>

    <div class="event" data-start="17:44" data-end="18:30">
      <div class="time">5:44 PM ‚Äì ‚úàÔ∏è Airport Pickup</div>
      <div class="mode">Arrival: UA 538 from EWR (Bryson, Catherine, Theo)</div>
    </div>
  </div>

  <script>
    function updateClock() {
      const now = new Date();
      const pad = n => n.toString().padStart(2, '0');
      const hours = pad(now.getHours());
      const minutes = pad(now.getMinutes());
      const seconds = pad(now.getSeconds());
      document.getElementById('clock').textContent = `Current Time: ${hours}:${minutes}:${seconds}`;

      updateTimeline(`${hours}:${minutes}`);
    }

    function timeToMinutes(t) {
      const [h, m] = t.split(":").map(Number);
      return h * 60 + m;
    }

    function updateTimeline(currentTime) {
      const currentMinutes = timeToMinutes(currentTime);
      const events = document.querySelectorAll(".event");
      events.forEach(el => {
        const start = el.getAttribute("data-start");
        const end = el.getAttribute("data-end");
        const startMin = timeToMinutes(start);
        const endMin = timeToMinutes(end);
        if (currentMinutes >= startMin && currentMinutes < endMin) {
          el.classList.add("active");
          updateCountdown(el, endMin - currentMinutes);
        } else {
          el.classList.remove("active");
          const old = el.querySelector(".countdown");
          if (old) old.remove();
        }
      });
    }

    function updateCountdown(el, minutesLeft) {
      let countdown = el.querySelector(".countdown");
      if (!countdown) {
        countdown = document.createElement("div");
        countdown.className = "countdown";
        el.appendChild(countdown);
      }
      countdown.textContent = `‚è≥ ${minutesLeft} minute${minutesLeft === 1 ? "" : "s"} left`;
    }

    updateClock();
    setInterval(updateClock, 1000);
  </script>
</body>
</html>
